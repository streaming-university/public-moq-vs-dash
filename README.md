# Media-over-QUIC vs DASH

## Development (no Docker)
This section is under construction.

## Development using Docker

You need to have [Docker](https://docs.docker.com/get-docker/), [Go](https://go.dev/), and [FFmpeg](https://ffmpeg.org/) installed in your machine.

> Go has to be installed because we use it to install CA certificates in the docker image and your browser will trust the certificates generated by the server.

> [!IMPORTANT]
> Generated certificates are only valid for 10 days. If you ever face SSL errors, you can regenerate the certificates by running `make certs/localhost.crt`.

### Running the server

```bash
make dev
```

After running the command above, you should be able to access the server at [https://localhost:5173](https://localhost:5173).

#### Remarks:

- With this command, any changes you make in `repos/demo` and `repos/moq-rs` will be reflected in the server.
- No need to setup CA yourself, or modify `/etc/hosts` to trick the browser into trusting the certificates.
- When a file related to `moq-pub` changes, at the same time `moq-relay` will restart. So you have to wait until `moq-pub` fails for it to restart itself. Otherwise you can just send SIGINT and restart `moq-pub`

### Starting a stream

```bash
make pub-moq
make pub-dash
```

These will run FFmpeg and supply the generated stream to moq (via pipe) and dash (via http). Look at `scripts/pub-moq` and `scripts/pub-dash` to see how we use FFmpeg to publish the stream.

## Production

### Building the server

```bash
make prod
```

The only difference between `dev` and `prod` is that no live-reloading is enabled in the `prod` version.

### Starting the stream

This is the same as in development.
